# 干支计时

## 年干支计算

现行公历纪年与干支纪年的对应关系中，以公元 4 年为甲子年作为起始，所以计算时需先减 3 来进行对应转换。

- 天干算法：用公历年数减3，除以10（不管商数）所得余数，就是天干所对应的位数。例如2025年，（2025 - 3）÷10 = 202余2，天干中第2位是乙。
- 地支算法：用公历年数减3，除以12（不管商数）所得余数，就是地支所对应的位数 。（2025 - 3）÷12 = 168余6，地支中第6位是巳。所以2025年干支为乙巳年。

## 月干支计算

月干支由年天干来推导，依据“五虎遁”口诀：

- **口诀**：甲己之年丙作首，乙庚之岁戊为头。丙辛必定寻庚起，丁壬壬位顺行流。若问戊癸何方发，甲寅之上好追求 。

- “甲己之年丙作首” 指年天干为甲或己时，正月的天干为丙，即丙寅月，二月为丁卯月，依此类推。
- “乙庚之岁戊为头” 指年天干为乙或庚时，正月是戊寅月。
- “丙辛必定寻庚起” 指年天干为丙或辛时，正月为庚寅月。
- “丁壬壬位顺行流” 指年天干为丁或壬时，正月为壬寅月。
- “若问戊癸何方发，甲寅之上好追求” 指年天干为戊或癸时，正月为甲寅月 。

古人依据天干五合（甲己合、乙庚合、丙辛合、丁壬合、戊癸合）的关系，以及阳干配阳支的原则，总结出了 “五虎遁” 口诀来推导月天干。干支历的月份以二十四节气为起始，每个月从对应的节气（月节）开始，如立春为寅月开始，惊蛰是卯月开始 。

寅月为正月的习惯大致是从夏朝开始的。

在夏、殷、周三代，每年把哪个月定为“正月”是不一样的。夏朝采用寅月为正月；殷代是12月（称“建丑”）为正月；周代是11月（称“建子”）为正月。夏朝的古人按照北斗星把柄的指向来确定月份方向，当北斗七星的斗柄指向寅位的时候，正是阳气上升、大地回春的时节，所以夏朝把正月定为寅月。这种以北斗星斗柄指向确定月份的方式体现了古人对天文现象的观察和理解。

后来，虽然经历了殷、周等朝代对于正月的不同规定，但到了东汉又恢复了夏制，寅月为正月的做法沿用至今。我们现在所使用的农历，在正月的确定上实际上是沿用了夏历的传统。不过需要注意的是，农历是一种阴阳合历，与纯粹的干支历有所不同。

### 日干支的确定

- **公式计算法**：较为复杂，涉及到一些常数和运算。公式为G = 4C + [C / 4] + 5y + [y / 4] + [3 * (M + 1) / 5] + d - 3，Z = 8C + [C / 4] + 5y + [y / 4] + [3 * (M + 1) / 5] + d + 7 + i （其中G为天干数，Z为地支数，C为世纪数减1，y为年份后两位，M为月份，d为日数。1月和2月按上一年的13月和14月来算。[ ]为取整运算，i为修正值）。

早在殷商时期，干支纪日就已经相当成熟。从殷墟出土的甲骨文中，有大量的干支纪日记录。这表明当时人们已经熟练地使用干支来标记日子，而且这种纪日方式具有连续性和系统性。
 
### 时干支的确定

时干支由日天干推导，依据“五鼠遁”口诀：

- **口诀**：甲己还加甲，乙庚丙作初。丙辛从戊起，丁壬庚子居。戊癸起壬子，周而复始求。

- “甲己还加甲” 指日天干为甲或己时，子时的天干为甲，即甲子时，之后依次按天干顺序搭配地支。
- “乙庚丙作初” 指日天干为乙或庚时，子时的天干为丙，即丙子时。
- “丙辛从戊起” 指日天干为丙或辛时，子时的天干为戊，即戊子时。
- “丁壬庚子居” 指日天干为丁或壬时，子时的天干为庚，即庚子时。
- “戊癸起壬子” 指日天干为戊或癸时，子时的天干为壬，即壬子时。 
