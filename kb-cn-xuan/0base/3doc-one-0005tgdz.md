# 干支计时

## 历法

- 太阴历：月绕地球周期，置闰月
- 太阳历：地球绕太阳周期，重节气
  - 立春切年干支
  - 立春建寅月，两个节气切月干支
  - 一日切一日干支
  - 一时切一时干支
- 农历：阴阳合历，加置闰月

**二十四节气 月支 阳历日期**

在干支纪月中，以节气为切换标志。寅月从立春开始，当惊蛰节气到来时，干支纪月就切换到卯月。这是因为每个月对应两个节气，第一个是“节”，第二个是“气”，寅月对应的节气是立春（节）和惊蛰（气）。当一个月的“气”到来时，这个月结束，进入下一个月对应的干支纪月。

- 立春(寅月)：2月3-5日
- 雨水(寅月)：2月18-20日
- 惊蛰(卯月)：3月5-7日
- 春分(卯月)：3月20-22日
- 清明(辰月)：4月4-6日
- 谷雨(辰月)：4月19-21日
- 立夏(巳月)：5月5-7日
- 小满(巳月)：5月20-23日
- 芒种(午月)：6月5-7日
- 夏至(午月)：6月21-22日
- 小暑(未月)：7月6-8日
- 大暑(未月)：7月22-24日
- 立秋(申月)：8月7-9日
- 处暑(申月)：8月22-24日
- 白露(酉月)：9月7-9日
- 秋分(酉月)：9月22-24日
- 寒露(戌月)：10月8-9日
- 霜降(戌月)：10月23-24日
- 立冬(亥月)：11月7-8日
- 小雪(亥月)：11月22-23日
- 大雪(子月)：12月6-8日
- 冬至(子月)：12月21-23日
- 小寒(丑月)：1月5-7日
- 大寒(丑月)：1月20-21日

![天干地支24节气](assets/3doc-one-0005tgdz-24jq.png)

## 甲子历

### 年干支计算

现行公历纪年与干支纪年的对应关系中，以公元 4 年为甲子年作为起始，所以计算时需先减 3 来进行对应转换。

- 天干算法：用公历年数减3，除以10（不管商数）所得余数，就是天干所对应的位数。例如2025年，（2025 - 3）÷10 = 202余2，天干中第2位是乙。
- 地支算法：用公历年数减3，除以12（不管商数）所得余数，就是地支所对应的位数 。（2025 - 3）÷12 = 168余6，地支中第6位是巳。所以2025年干支为乙巳年。

**立春前后要参考立春时间**

### 月干“五虎遁”口诀

月干由年天干来推导，依据“五虎遁”口诀：

- **口诀**：甲己之年丙作首，乙庚之岁戊为头。丙辛必定寻庚起，丁壬壬位顺行流。若问戊癸何方发，甲寅之上好追求 。

- “甲己之年丙作首” 指年天干为甲或己时，正月的天干为丙，即丙寅月，二月为丁卯月，依此类推。
- “乙庚之岁戊为头” 指年天干为乙或庚时，正月是戊寅月。
- “丙辛必定寻庚起” 指年天干为丙或辛时，正月为庚寅月。
- “丁壬壬位顺行流” 指年天干为丁或壬时，正月为壬寅月。
- “若问戊癸何方发，甲寅之上好追求” 指年天干为戊或癸时，正月为甲寅月 。

古人依据天干五合（甲己合、乙庚合、丙辛合、丁壬合、戊癸合）的关系，以及阳干配阳支的原则，总结出了 “五虎遁” 口诀来推导月天干。干支历的月份以二十四节气为起始，每个月从对应的节气（月节）开始，如立春为寅月开始，惊蛰是卯月开始 。

寅月为正月的习惯大致是从夏朝开始的。

在夏、殷、周三代，每年把哪个月定为“正月”是不一样的。夏朝采用寅月为正月；殷代是12月（称“建丑”）为正月；周代是11月（称“建子”）为正月。夏朝的古人按照北斗星把柄的指向来确定月份方向，当北斗七星的斗柄指向寅位的时候，正是阳气上升、大地回春的时节，所以夏朝把正月定为寅月。这种以北斗星斗柄指向确定月份的方式体现了古人对天文现象的观察和理解。

后来，虽然经历了殷、周等朝代对于正月的不同规定，但到了东汉又恢复了夏制，寅月为正月的做法沿用至今。我们现在所使用的农历，在正月的确定上实际上是沿用了夏历的传统。不过需要注意的是，农历是一种阴阳合历，与纯粹的干支历有所不同。

### 流日干支的确定

- **公式计算法**：较为复杂，涉及到一些常数和运算。公式为G = 4C + [C / 4] + 5y + [y / 4] + [3 * (M + 1) / 5] + d - 3，Z = 8C + [C / 4] + 5y + [y / 4] + [3 * (M + 1) / 5] + d + 7 + i （其中G为天干数，Z为地支数，C为世纪数减1，y为年份后两位，M为月份，d为日数。1月和2月按上一年的13月和14月来算。[ ]为取整运算，i为修正值）。

早在殷商时期，干支纪日就已经相当成熟。从殷墟出土的甲骨文中，有大量的干支纪日记录。这表明当时人们已经熟练地使用干支来标记日子，而且这种纪日方式具有连续性和系统性。

### 时干支“五鼠遁”口诀

时干支由日天干推导，依据“五鼠遁”口诀：

- **口诀**：甲己还加甲，乙庚丙作初。丙辛从戊起，丁壬庚子居。戊癸起壬子，周而复始求。

- “甲己还加甲” 指日天干为甲或己时，子时的天干为甲，即甲子时，之后依次按天干顺序搭配地支。
- “乙庚丙作初” 指日天干为乙或庚时，子时的天干为丙，即丙子时。
- “丙辛从戊起” 指日天干为丙或辛时，子时的天干为戊，即戊子时。
- “丁壬庚子居” 指日天干为丁或壬时，子时的天干为庚，即庚子时。
- “戊癸起壬子” 指日天干为戊或癸时，子时的天干为壬，即壬子时。 

## 农历大小月

农历大小月的划分并非随意，而是有其独特的规律。

### 基本原理

农历以朔望月为基础，朔望月是月相从朔（新月）到下一次朔所经历的时间，平均约为29.5306天 。由于这个时间不是整数，为了使农历月份与月相变化相对应，就需要设置大月和小月。

### 大小月具体划分方法

- **大月**：农历大月有30天。当朔日在初一，望日（满月）在十五或十六时，这个月通常为大月。例如，农历2025年正月初一为公历1月29日，正月十五元宵节为公历2月12日，该月就是大月。
- **小月**：农历小月有29天。当朔日在初一，望日在十四或十五时，这个月一般是小月。比如农历2025年二月初一为公历2月13日，二月十五为公历2月27日，此月即为小月。

农历月份的大小月设置会根据朔望月的实际情况进行调整，以保证农历与月相和季节的相对准确性。 

### 置闰

1. **回归年和朔望月的概念**
   - **回归年**：是指太阳连续两次通过春分点的时间间隔，约为365.24天。它是地球围绕太阳公转周期的体现，与季节变化紧密相关。
   - **朔望月**：是指月球绕地球公转相对于太阳的平均周期，也就是从朔（新月）到下一次朔的时间间隔，约为29.53天。农历的一个月就是根据朔望月来确定的。
2. **置闰法的必要性**
   - 由于12个朔望月的长度（12×29.5306 = 354.3672天）比回归年短约11天左右。如果不进行调整，农历的月份和季节就会逐渐脱节。例如，经过若干年后，原本在春季的节日可能会出现在夏季。
3. **19年7闰的原理**
   - 19个回归年的长度约为19×365.2422 = 6939.6018天。19个农历年（包含12个正常月和7个闰月），每个月按29.5306天计算，总长度约为(12×19 + 7)×29.5306=6939.6884天。这样两者的长度就非常接近了。
   - 具体置闰的规则比较复杂。农历规定，某个月份中只有当出现中气（二十四节气分为节气和中气，如雨水、春分等为中气）落在月末的情况，下个月才会被设为闰月。中气是根据太阳在黄道上的位置来划分的，能更好地反映季节变化。
   - 中气是二十四节气中处于偶数位置的节气，如雨水、春分、谷雨等。由于一个回归年有 12 个中气，它们均匀分布在一年之中。正常情况下，每个农历月份应该包含一个中气。但因为朔望月和回归年长度的差异，有时会出现某个农历月份没有中气的情况。
